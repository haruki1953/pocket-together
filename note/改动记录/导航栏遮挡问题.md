# 导航栏遮挡问题

## 问题描述

在移动端，浏览器通常提供了默认的浏览器导航栏  
底部导航栏是固定的，这可能会遮挡我们自己设置的导航从 

---

## 解决方案：基于滚动的动态显隐

为了解决这个问题，我实现了一个常见的交互：  
当用户向下滚动页面时，导航栏向下贴在底部；当用户向上滚动时，导航栏向上悬浮在浏览器默认导航的上方重新出现

---

## 逻辑

1.  **滚动方向**:
    - 引入 `@vueuse/core` 获取窗口的垂直滚动距离 `y`
    - 监听 `y` 值的变化 (`newY > oldY`) 判断向上还是向下

2.  **状态管理**:
    - 创建了一个名为 `isNavBottomUpOrDown` 的响应式变量记录导航栏应该贴在下面 (`true`) 还是在浮在上面 (`false`)

3.  **规避刷新抖动**:
    - 使用 `onMounted` 和 `setTimeout` 组合使得 `watch` 函数仅在组件挂载一小段时间后才开始响应滚动事件
    - 此举是为了让浏览器刷新后始终默认为悬浮状态

### 模板与样式实现

  - 在导航栏的容器元素上，通过 `:class` 动态绑定了 tailwind 的 `padding` 类
  - 当 `isNavBottomUpOrDown` 为 `true` 时，应用 `pb-28`，将导航栏内容推上来
  - 当 `isNavBottomUpOrDown` 为 `false` 时，应用 `pb-0`，让导航栏内容回到原位
- **过渡动画**：添加了 `duration-1000` 和 `ease-in-out` 等过渡类

---

## 相关配置调整

- 为了给 `padding` 的变化提供足够的空间，在 `src/config/layout.ts` 文件中，将 `navBottomHeight` 的值从 `80` 增加到了 `176`

---

## 总结

我们实现了一个响应式的底部导航栏。该方案不仅解决了内容遮挡问题，还通过规避刷新时的初始滚动事件，确保了用户体验的一致性

### 2025.08.09 切符 共勉


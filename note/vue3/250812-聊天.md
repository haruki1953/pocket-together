
## 全局聊天

```
布局
聊天输入框
输入框栏封装
小屏设计
消息样式
游标分页查询

api封装、query封装
数据处理与渲染

将分页数据处理为消息数组，反转
渲染消息
消息变动时的滚动处理
实时消息实现
TODO
渲染数量限制
无限滚动

消息详情对话框，修改，删除
修改，删除，消息渲染
图片、回复功能
消息上下文定位，双向查询
路由返回，位置保持
占位数据持久化缓存

用户详情对话框
用户列表
```

消息变动时的滚动处理
```
弄两个函数，分别是 获取收集数据 计算处理滚动
在会导致显示消息变化的地方，使用它这两个函数
变化前 调用 获取收集数据 将返回值接收为oldData
变化后 调用 计算处理滚动 传入刚刚的oldData

计算处理滚动
对比当前数据与旧数据，找出在顶部增加的，统计其高度，将当前滚动位置增加此高度
如果在顶部减少了，则当前滚动位置减少此高度
```

实时消息实现
```
useRealtimeMessagesStore
暂时直接使用pb，之后记得要加上超时和重试，并封装api
```